<div ng-controller="ItemsController">

  <h2>
    {{restaurant.name}}'s Menu
  </h2>
  <hr/>
  <ul>

  <!-- For every tag object (with name and state) in var tagFilters, iterate.  -->
  <div ng-repeat="tagFilter in tagFilters">
    <!-- On the click event, run the toggleTagState fn to change the tag object's state property. -->
    <button class="tag-filter{{tagFilter.state}}" ng-class="{'include': tagFilter.state == 1, 'exclude': tagFilter.state == 2}" ng-click="toggleTagState(tagFilter)">{{tagFilter.name}}</button>
  </div>

    <div ng-repeat="menu in restaurant.menus">
      <h3>{{menu.name}}</h3>
      <div ng-repeat="section in menu.sections">
        <p>{{section.name}}</p>
        <li ng-repeat="item in section.items | filter:customTagFilter">
          <a ng-href="/restaurants/{{restaurantId}}/menuItems/{{item.id}}">
          <p><img src="{{item.photo_url}}" width="200"></p>
          <p>Item: {{item.name}}</p>
          <p>Description: {{item.description}}</p>
          <p>Price:  {{ item.price | currency : $ : 2 }}</p>
          <label>Tags: </label>
          <ul>
            <li ng-repeat="diet in item.diets">
              {{diet.name}}
            </li>
            <li ng-repeat="ingredient in item.ingredients">
              {{ingredient.name}}
            </li>
            <li ng-repeat="taste in item.tastes">
              {{taste.name}}
            </li>
          </ul>
          </a>
          <hr/>
        </li>
      </div>
    </div>
  </ul>
</div>
